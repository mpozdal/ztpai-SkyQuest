{"ast":null,"code":"'use client';\n\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _cloneDeep from \"lodash/cloneDeep\";\nimport _omit from \"lodash/omit\";\nimport _isFunction from \"lodash/isFunction\";\nimport _pick from \"lodash/pick\";\nimport _isNil from \"lodash/isNil\";\nimport React, { useState, useEffect, useContext, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { List, AutoSizer } from '../internals/Windowing';\nimport CheckTreeNode from './CheckTreeNode';\nimport TreeContext from '../Tree/TreeContext';\nimport { getKeyParentMap, getPathTowardsItem, getTreeNodeIndent } from '../utils/treeUtils';\nimport { createChainedFunction, useCustom, useClassNames, useControlled, useEventCallback, KEY_VALUES, mergeRefs } from '../utils';\nimport { PickerToggle, TreeView, onMenuKeyDown as _onMenuKeyDown, PickerPopup, SelectedElement, PickerToggleTrigger, createConcatChildrenFunction, usePickerClassName, useToggleKeyDownEvent, usePickerRef, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../internals/Picker';\nimport SearchBox from '../internals/SearchBox';\nimport { isEveryChildChecked, isSomeNodeHasChildren, isAllSiblingNodeUncheckable, isEveryFirstLevelNodeUncheckable, getFormattedTree, getDisabledState, getCheckTreePickerDefaultValue, getSelectedItems, isNodeUncheckable } from './utils';\nimport { hasVisibleChildren, getExpandWhenSearching, useTreeSearch, useTreeNodeRefs, getDefaultExpandItemValues, useFlattenTreeData, focusNextItem, getFocusableItems, focusPreviousItem, toggleExpand, getActiveItem, useGetTreeNodeChildren, focusToActiveTreeNode, focusTreeNode, leftArrowHandler, rightArrowHandler, isSearching } from '../utils/treeUtils';\nimport { oneOf } from '../internals/propTypes';\nvar emptyArray = [];\nvar itemSize = function itemSize() {\n  return 36;\n};\n\n/**\n * The `CheckTreePicker` component is used for selecting multiple options which are organized in a tree structure.\n *\n * @see https://rsuitejs.com/components/check-tree-picker\n */\nvar CheckTreePicker = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _props$as = props.as,\n    Component = _props$as === void 0 ? 'div' : _props$as,\n    _props$data = props.data,\n    data = _props$data === void 0 ? emptyArray : _props$data,\n    style = props.style,\n    _props$appearance = props.appearance,\n    appearance = _props$appearance === void 0 ? 'default' : _props$appearance,\n    _props$cleanable = props.cleanable,\n    cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\n    _props$countable = props.countable,\n    countable = _props$countable === void 0 ? true : _props$countable,\n    searchBy = props.searchBy,\n    toggleAs = props.toggleAs,\n    searchKeyword = props.searchKeyword,\n    showIndentLine = props.showIndentLine,\n    overrideLocale = props.locale,\n    _props$cascade = props.cascade,\n    cascade = _props$cascade === void 0 ? true : _props$cascade,\n    disabled = props.disabled,\n    _props$valueKey = props.valueKey,\n    valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n    _props$labelKey = props.labelKey,\n    labelKey = _props$labelKey === void 0 ? 'label' : _props$labelKey,\n    _props$placement = props.placement,\n    placement = _props$placement === void 0 ? 'bottomStart' : _props$placement,\n    _props$childrenKey = props.childrenKey,\n    childrenKey = _props$childrenKey === void 0 ? 'children' : _props$childrenKey,\n    placeholder = props.placeholder,\n    controlledValue = props.value,\n    _props$defaultValue = props.defaultValue,\n    defaultValue = _props$defaultValue === void 0 ? emptyArray : _props$defaultValue,\n    _props$defaultExpandA = props.defaultExpandAll,\n    defaultExpandAll = _props$defaultExpandA === void 0 ? false : _props$defaultExpandA,\n    _props$disabledItemVa = props.disabledItemValues,\n    disabledItemValues = _props$disabledItemVa === void 0 ? emptyArray : _props$disabledItemVa,\n    controlledExpandItemValues = props.expandItemValues,\n    _props$defaultExpandI = props.defaultExpandItemValues,\n    defaultExpandItemValues = _props$defaultExpandI === void 0 ? emptyArray : _props$defaultExpandI,\n    _props$height = props.height,\n    height = _props$height === void 0 ? 360 : _props$height,\n    _props$menuMaxHeight = props.menuMaxHeight,\n    menuMaxHeight = _props$menuMaxHeight === void 0 ? 320 : _props$menuMaxHeight,\n    menuStyle = props.menuStyle,\n    _props$searchable = props.searchable,\n    searchable = _props$searchable === void 0 ? true : _props$searchable,\n    _props$virtualized = props.virtualized,\n    virtualized = _props$virtualized === void 0 ? false : _props$virtualized,\n    className = props.className,\n    _props$classPrefix = props.classPrefix,\n    classPrefix = _props$classPrefix === void 0 ? 'picker' : _props$classPrefix,\n    menuClassName = props.menuClassName,\n    _props$menuAutoWidth = props.menuAutoWidth,\n    menuAutoWidth = _props$menuAutoWidth === void 0 ? true : _props$menuAutoWidth,\n    _props$uncheckableIte = props.uncheckableItemValues,\n    uncheckableItemValues = _props$uncheckableIte === void 0 ? emptyArray : _props$uncheckableIte,\n    id = props.id,\n    listProps = props.listProps,\n    renderMenu = props.renderMenu,\n    getChildren = props.getChildren,\n    renderExtraFooter = props.renderExtraFooter,\n    onEntered = props.onEntered,\n    onChange = props.onChange,\n    onClean = props.onClean,\n    onExited = props.onExited,\n    onSearch = props.onSearch,\n    onSelect = props.onSelect,\n    onSelectItem = props.onSelectItem,\n    onScroll = props.onScroll,\n    onExpand = props.onExpand,\n    renderValue = props.renderValue,\n    renderTreeIcon = props.renderTreeIcon,\n    renderTreeNode = props.renderTreeNode,\n    rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"style\", \"appearance\", \"cleanable\", \"countable\", \"searchBy\", \"toggleAs\", \"searchKeyword\", \"showIndentLine\", \"locale\", \"cascade\", \"disabled\", \"valueKey\", \"labelKey\", \"placement\", \"childrenKey\", \"placeholder\", \"value\", \"defaultValue\", \"defaultExpandAll\", \"disabledItemValues\", \"expandItemValues\", \"defaultExpandItemValues\", \"height\", \"menuMaxHeight\", \"menuStyle\", \"searchable\", \"virtualized\", \"className\", \"classPrefix\", \"menuClassName\", \"menuAutoWidth\", \"uncheckableItemValues\", \"id\", \"listProps\", \"renderMenu\", \"getChildren\", \"renderExtraFooter\", \"onEntered\", \"onChange\", \"onClean\", \"onExited\", \"onSearch\", \"onSelect\", \"onSelectItem\", \"onScroll\", \"onExpand\", \"renderValue\", \"renderTreeIcon\", \"renderTreeNode\"]);\n  var _useContext = useContext(TreeContext),\n    inline = _useContext.inline;\n  var _usePickerRef = usePickerRef(ref, {\n      inline: inline\n    }),\n    trigger = _usePickerRef.trigger,\n    root = _usePickerRef.root,\n    target = _usePickerRef.target,\n    overlay = _usePickerRef.overlay,\n    list = _usePickerRef.list,\n    searchInput = _usePickerRef.searchInput,\n    treeView = _usePickerRef.treeView;\n  var _useCustom = useCustom('Picker', overrideLocale),\n    rtl = _useCustom.rtl,\n    locale = _useCustom.locale;\n  var _useState = useState(false),\n    active = _useState[0],\n    setActive = _useState[1];\n  var _useState2 = useState(null),\n    activeNode = _useState2[0],\n    setActiveNode = _useState2[1];\n  var _useClassNames = useClassNames(classPrefix),\n    prefix = _useClassNames.prefix,\n    merge = _useClassNames.merge;\n  var _useClassNames2 = useClassNames(inline && classPrefix !== 'picker' ? classPrefix : 'check-tree'),\n    checkTreePrefix = _useClassNames2.prefix,\n    withCheckTreeClassPrefix = _useClassNames2.withClassPrefix;\n  var _useControlled = useControlled(controlledValue, defaultValue),\n    value = _useControlled[0],\n    setValue = _useControlled[1],\n    isControlled = _useControlled[2];\n  var _useGetTreeNodeChildr = useGetTreeNodeChildren(data, valueKey, childrenKey),\n    treeData = _useGetTreeNodeChildr.data,\n    setTreeData = _useGetTreeNodeChildr.setData,\n    loadingNodeValues = _useGetTreeNodeChildr.loadingNodeValues,\n    loadChildren = _useGetTreeNodeChildr.loadChildren;\n  var _useControlled2 = useControlled(controlledExpandItemValues, getDefaultExpandItemValues(treeData, {\n      defaultExpandAll: defaultExpandAll,\n      valueKey: valueKey,\n      childrenKey: childrenKey,\n      defaultExpandItemValues: defaultExpandItemValues\n    })),\n    expandItemValues = _useControlled2[0],\n    setExpandItemValues = _useControlled2[1];\n  var _useState3 = useState(null),\n    focusItemValue = _useState3[0],\n    setFocusItemValue = _useState3[1];\n  var _useFlattenTreeData = useFlattenTreeData({\n      data: treeData,\n      labelKey: labelKey,\n      valueKey: valueKey,\n      childrenKey: childrenKey,\n      uncheckableItemValues: uncheckableItemValues,\n      callback: function callback(nodes) {\n        // after flattenData, always unSerialize check property value\n        unSerializeList({\n          nodes: nodes,\n          key: 'check',\n          value: value,\n          cascade: cascade,\n          uncheckableItemValues: uncheckableItemValues\n        });\n        forceUpdate();\n      }\n    }),\n    flattenNodes = _useFlattenTreeData.flattenNodes,\n    forceUpdate = _useFlattenTreeData.forceUpdate,\n    formatVirtualizedTreeData = _useFlattenTreeData.formatVirtualizedTreeData,\n    serializeListOnlyParent = _useFlattenTreeData.serializeListOnlyParent,\n    unSerializeList = _useFlattenTreeData.unSerializeList;\n  var _useTreeSearch = useTreeSearch({\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      searchKeyword: searchKeyword,\n      data: treeData,\n      searchBy: searchBy,\n      callback: function callback(searchKeyword, _filterData, event) {\n        onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchKeyword, event);\n      }\n    }),\n    filteredData = _useTreeSearch.filteredData,\n    searchKeywordState = _useTreeSearch.searchKeywordState,\n    setSearchKeyword = _useTreeSearch.setSearchKeyword,\n    handleSearch = _useTreeSearch.handleSearch,\n    setFilteredData = _useTreeSearch.setFilteredData;\n  var _useTreeNodeRefs = useTreeNodeRefs(),\n    treeNodesRefs = _useTreeNodeRefs.treeNodesRefs,\n    saveTreeNodeRef = _useTreeNodeRefs.saveTreeNodeRef;\n  /**\n   * get formatted nodes for render tree\n   * @params render - renderNode function. only used when virtualized setting false\n   */\n  var getFormattedNodes = function getFormattedNodes(render) {\n    if (virtualized) {\n      return formatVirtualizedTreeData(flattenNodes, filteredData, expandItemValues, {\n        cascade: cascade,\n        searchKeyword: searchKeywordState\n      }).filter(function (item) {\n        return item.visible;\n      });\n    }\n    return getFormattedTree(flattenNodes, filteredData, {\n      childrenKey: childrenKey,\n      cascade: cascade\n    }).map(function (node) {\n      return render === null || render === void 0 ? void 0 : render(node, 1);\n    });\n  };\n  var getTreeNodeProps = function getTreeNodeProps(node, layer) {\n    return {\n      as: Component,\n      rtl: rtl,\n      value: node[valueKey],\n      label: node[labelKey],\n      layer: layer,\n      focus: focusItemValue === node[valueKey],\n      expand: node.expand,\n      visible: node.visible,\n      loading: loadingNodeValues.some(function (item) {\n        return item === node[valueKey];\n      }),\n      disabled: getDisabledState(flattenNodes, node, {\n        disabledItemValues: disabledItemValues,\n        valueKey: valueKey\n      }),\n      nodeData: node,\n      checkState: node.checkState,\n      uncheckable: isNodeUncheckable(node, {\n        uncheckableItemValues: uncheckableItemValues,\n        valueKey: valueKey\n      }),\n      allUncheckable: isAllSiblingNodeUncheckable(node, flattenNodes, uncheckableItemValues, valueKey),\n      onSelect: handleSelect,\n      onExpand: handleExpand,\n      renderTreeNode: renderTreeNode,\n      renderTreeIcon: renderTreeIcon\n    };\n  };\n  var focusActiveNode = function focusActiveNode() {\n    if (list.current) {\n      focusToActiveTreeNode({\n        list: list.current,\n        valueKey: valueKey,\n        selector: \".\" + checkTreePrefix('node-active'),\n        activeNode: activeNode,\n        virtualized: virtualized,\n        container: treeView.current,\n        formattedNodes: getFormattedNodes()\n      });\n    }\n  };\n  useEffect(function () {\n    setValue(getCheckTreePickerDefaultValue(value, uncheckableItemValues));\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    setFilteredData(data, searchKeywordState);\n    setTreeData(data);\n  }, [data, searchKeywordState, setFilteredData, setTreeData]);\n  useEffect(function () {\n    setFilteredData(treeData, searchKeywordState);\n  }, [treeData, searchKeywordState, setFilteredData]);\n  useEffect(function () {\n    if (Array.isArray(controlledExpandItemValues)) {\n      setExpandItemValues(controlledExpandItemValues);\n    }\n  }, [controlledExpandItemValues, setExpandItemValues]);\n  useEffect(function () {\n    setSearchKeyword(searchKeyword !== null && searchKeyword !== void 0 ? searchKeyword : '');\n  }, [searchKeyword, setSearchKeyword]);\n  useEffect(function () {\n    unSerializeList({\n      nodes: flattenNodes,\n      key: 'check',\n      value: value,\n      cascade: cascade,\n      uncheckableItemValues: uncheckableItemValues\n    });\n    forceUpdate();\n  }, [cascade, value, uncheckableItemValues, unSerializeList, flattenNodes, forceUpdate]);\n  var toggleUpChecked = useEventCallback(function (nodes, node, checked) {\n    var currentNode = node.refKey ? nodes[node.refKey] : null;\n    if (cascade && currentNode) {\n      if (!checked) {\n        currentNode.check = checked;\n        currentNode.checkAll = checked;\n      } else {\n        if (isEveryChildChecked(nodes, currentNode)) {\n          currentNode.check = true;\n          currentNode.checkAll = true;\n        } else {\n          currentNode.check = false;\n          currentNode.checkAll = false;\n        }\n      }\n      if (currentNode.parent) {\n        toggleUpChecked(nodes, currentNode.parent, checked);\n      }\n    }\n  });\n  var toggleDownChecked = useEventCallback(function (nodes, node, isChecked) {\n    var currentNode = node.refKey ? nodes[node.refKey] : null;\n    if (!currentNode) {\n      return;\n    }\n    currentNode.check = isChecked;\n    if (!currentNode[childrenKey] || !currentNode[childrenKey].length || !cascade) {\n      currentNode.checkAll = false;\n    } else {\n      currentNode.checkAll = isChecked;\n      currentNode[childrenKey].forEach(function (child) {\n        toggleDownChecked(nodes, child, isChecked);\n      });\n    }\n  });\n  var toggleChecked = useEventCallback(function (node, isChecked) {\n    var nodes = _cloneDeep(flattenNodes);\n    toggleDownChecked(nodes, node, isChecked);\n    node.parent && toggleUpChecked(nodes, node.parent, isChecked);\n    var values = serializeListOnlyParent(nodes, 'check');\n    // filter uncheckableItemValues\n    return values.filter(function (v) {\n      return !uncheckableItemValues.includes(v);\n    });\n  });\n\n  // TODO-Doma\n  // Replace `getKeyParentMap` with `getParentMap`\n  var itemParentMap = useMemo(function () {\n    return getKeyParentMap(data, function (node) {\n      return node[valueKey];\n    }, function (node) {\n      return node[childrenKey];\n    });\n  }, [childrenKey, data, valueKey]);\n  var handleSelect = useEventCallback(function (node, event) {\n    var currentNode = node.refKey ? flattenNodes[node.refKey] : null;\n    if (!node || !currentNode) {\n      return;\n    }\n    var selectedValues = toggleChecked(node, !currentNode.check);\n    if (!isControlled) {\n      unSerializeList({\n        nodes: flattenNodes,\n        key: 'check',\n        value: selectedValues,\n        cascade: cascade,\n        uncheckableItemValues: uncheckableItemValues\n      });\n      setValue(selectedValues);\n    }\n    setActiveNode(node);\n    setFocusItemValue(node[valueKey]);\n    onChange === null || onChange === void 0 ? void 0 : onChange(selectedValues, event);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, selectedValues, event);\n    onSelectItem === null || onSelectItem === void 0 ? void 0 : onSelectItem(node, getPathTowardsItem(node, function (item) {\n      return itemParentMap.get(item[valueKey]);\n    }));\n  });\n  var handleOpen = useEventCallback(function () {\n    setFocusItemValue(activeNode === null || activeNode === void 0 ? void 0 : activeNode[valueKey]);\n    focusActiveNode();\n    setActive(true);\n  });\n  var handleClose = useEventCallback(function () {\n    var _target$current;\n    setSearchKeyword('');\n    setFocusItemValue(null);\n    setActive(false);\n\n    /**\n     * when using keyboard toggle picker, should refocus on PickerToggle Component after close picker menu\n     */\n    (_target$current = target.current) === null || _target$current === void 0 ? void 0 : _target$current.focus();\n  });\n  var handleExpand = useEventCallback(function (node) {\n    var nextExpandItemValues = toggleExpand({\n      node: node,\n      isExpand: !node.expand,\n      expandItemValues: expandItemValues,\n      valueKey: valueKey\n    });\n    setExpandItemValues(nextExpandItemValues);\n    onExpand === null || onExpand === void 0 ? void 0 : onExpand(nextExpandItemValues, node, createConcatChildrenFunction(node, node[valueKey], {\n      valueKey: valueKey,\n      childrenKey: childrenKey\n    }));\n    if (_isFunction(getChildren) && !node.expand && Array.isArray(node[childrenKey]) && node[childrenKey].length === 0) {\n      loadChildren(node, getChildren);\n    }\n  });\n  var handleClean = useEventCallback(function (event) {\n    var target = event.target;\n    // exclude searchbox\n    if (target.matches('input[role=\"searchbox\"]') || disabled || !cleanable) {\n      return;\n    }\n    setActiveNode(null);\n    setFocusItemValue(null);\n    if (!isControlled) {\n      setValue([]);\n      unSerializeList({\n        nodes: flattenNodes,\n        key: 'check',\n        value: [],\n        cascade: cascade,\n        uncheckableItemValues: uncheckableItemValues\n      });\n    }\n    onChange === null || onChange === void 0 ? void 0 : onChange([], event);\n  });\n  var handleFocusItem = useEventCallback(function (key) {\n    var focusableItems = getFocusableItems(filteredData, {\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      childrenKey: childrenKey,\n      expandItemValues: expandItemValues\n    }, isSearching(searchKeywordState));\n    var selector = \".\" + checkTreePrefix('node-label');\n    var focusProps = {\n      focusItemValue: focusItemValue,\n      focusableItems: focusableItems,\n      treeNodesRefs: treeNodesRefs,\n      selector: selector,\n      valueKey: valueKey,\n      callback: function callback(nextFocusItemValue) {\n        setFocusItemValue(nextFocusItemValue);\n      }\n    };\n    if (key === KEY_VALUES.DOWN) {\n      focusNextItem(focusProps);\n      return;\n    }\n    if (key === KEY_VALUES.UP) {\n      focusPreviousItem(focusProps);\n    }\n  });\n  var handleLeftArrow = useEventCallback(function () {\n    if (_isNil(focusItemValue)) return;\n    var focusItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    leftArrowHandler({\n      focusItem: focusItem,\n      expand: expandItemValues.includes(focusItem === null || focusItem === void 0 ? void 0 : focusItem[valueKey]),\n      onExpand: handleExpand,\n      childrenKey: childrenKey,\n      onFocusItem: function onFocusItem() {\n        var _focusItem$parent, _focusItem$parent2;\n        setFocusItemValue(focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent = focusItem.parent) === null || _focusItem$parent === void 0 ? void 0 : _focusItem$parent[valueKey]);\n        focusTreeNode(focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent2 = focusItem.parent) === null || _focusItem$parent2 === void 0 ? void 0 : _focusItem$parent2.refKey, treeNodesRefs, \".\" + checkTreePrefix('node-label'));\n      }\n    });\n  });\n  var handleRightArrow = useEventCallback(function () {\n    if (_isNil(focusItemValue)) return;\n    var focusItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    rightArrowHandler({\n      focusItem: focusItem,\n      expand: expandItemValues.includes(focusItem === null || focusItem === void 0 ? void 0 : focusItem[valueKey]),\n      childrenKey: childrenKey,\n      onExpand: handleExpand,\n      onFocusItem: function onFocusItem() {\n        handleFocusItem(KEY_VALUES.DOWN);\n      }\n    });\n  });\n  var selectActiveItem = function selectActiveItem(event) {\n    if (_isNil(focusItemValue)) return;\n    var activeItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    if (!isNodeUncheckable(activeItem, {\n      uncheckableItemValues: uncheckableItemValues,\n      valueKey: valueKey\n    }) && activeItem !== null) {\n      handleSelect(activeItem, event);\n    }\n  };\n  var onPickerKeydown = useToggleKeyDownEvent(_extends({\n    toggle: !focusItemValue || !active,\n    trigger: trigger,\n    target: target,\n    overlay: overlay,\n    searchInput: searchInput,\n    active: active,\n    onExit: handleClean,\n    onMenuKeyDown: function onMenuKeyDown(event) {\n      _onMenuKeyDown(event, {\n        down: function down() {\n          return handleFocusItem(KEY_VALUES.DOWN);\n        },\n        up: function up() {\n          return handleFocusItem(KEY_VALUES.UP);\n        },\n        left: rtl ? handleRightArrow : handleLeftArrow,\n        right: rtl ? handleLeftArrow : handleRightArrow,\n        enter: selectActiveItem,\n        del: handleClean\n      });\n    }\n  }, rest));\n  var handleTreeKeydown = useEventCallback(function (event) {\n    if (!treeView.current) {\n      return;\n    }\n    _onMenuKeyDown(event, {\n      down: function down() {\n        return handleFocusItem(KEY_VALUES.DOWN);\n      },\n      up: function up() {\n        return handleFocusItem(KEY_VALUES.UP);\n      },\n      left: rtl ? handleRightArrow : handleLeftArrow,\n      right: rtl ? handleLeftArrow : handleRightArrow,\n      enter: selectActiveItem\n    });\n  });\n  var renderNode = function renderNode(node, layer) {\n    var visible = node.visible,\n      refKey = node.refKey; // when searching, all nodes should be expand\n    var expand = getExpandWhenSearching(searchKeywordState, expandItemValues.includes(node[valueKey]));\n    if (!visible) {\n      return null;\n    }\n    var children = node[childrenKey];\n    var visibleChildren = _isUndefined(searchKeywordState) || searchKeywordState.length === 0 ? !!children : hasVisibleChildren(node, childrenKey);\n    var nodeProps = _extends({}, getTreeNodeProps(_extends({}, node, {\n      /**\n       * spread operator don't copy unenumerable properties\n       * so we need to copy them manually\n       */\n      parent: node.parent,\n      expand: expand\n    }), layer), {\n      hasChildren: visibleChildren\n    });\n    if (nodeProps.hasChildren) {\n      var _merge;\n      layer += 1;\n      var openClass = checkTreePrefix('open');\n      var childrenClass = merge(checkTreePrefix('node-children'), (_merge = {}, _merge[openClass] = expand && visibleChildren, _merge));\n      var nodes = children || [];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: childrenClass,\n        key: node[valueKey]\n      }, /*#__PURE__*/React.createElement(CheckTreeNode, _extends({}, nodeProps, {\n        ref: function ref(_ref) {\n          return saveTreeNodeRef(_ref, refKey);\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: checkTreePrefix('group'),\n        role: \"group\"\n      }, nodes.map(function (child) {\n        return renderNode(child, layer);\n      }), showIndentLine && /*#__PURE__*/React.createElement(\"span\", {\n        className: checkTreePrefix('indent-line'),\n        style: getTreeNodeIndent(rtl, layer - 1, true)\n      })));\n    }\n    return /*#__PURE__*/React.createElement(CheckTreeNode, _extends({\n      key: node[valueKey],\n      ref: function ref(_ref2) {\n        return saveTreeNodeRef(_ref2, refKey);\n      }\n    }, nodeProps));\n  };\n  var renderVirtualListNode = function renderVirtualListNode(_ref3) {\n    var index = _ref3.index,\n      style = _ref3.style,\n      data = _ref3.data;\n    var node = data[index];\n    var layer = node.layer,\n      refKey = node.refKey,\n      visible = node.visible;\n    var expand = getExpandWhenSearching(searchKeywordState, expandItemValues.includes(node[valueKey]));\n    var nodeProps = _extends({}, getTreeNodeProps(_extends({}, node, {\n      /**\n       * spread operator don't copy unenumerable properties\n       * so we need to copy them manually\n       */\n      parent: node.parent,\n      expand: expand\n    }), layer), {\n      hasChildren: node.hasChildren\n    });\n    return visible && /*#__PURE__*/React.createElement(CheckTreeNode, _extends({\n      style: style,\n      ref: function ref(_ref4) {\n        return saveTreeNodeRef(_ref4, refKey);\n      }\n    }, nodeProps));\n  };\n  var renderCheckTree = function renderCheckTree() {\n    var _merge2, _merge3;\n    var classes = merge(withCheckTreeClassPrefix({\n      'without-children': !isSomeNodeHasChildren(data, childrenKey),\n      virtualized: virtualized\n    }), (_merge2 = {}, _merge2[className !== null && className !== void 0 ? className : ''] = inline, _merge2));\n    var formattedNodes = getFormattedNodes(renderNode);\n    if (!formattedNodes.some(function (v) {\n      return v !== null;\n    })) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: prefix('none')\n      }, locale.noResultsText);\n    }\n    var treeNodesClass = merge(checkTreePrefix('root'), (_merge3 = {}, _merge3[checkTreePrefix('all-uncheckable')] = isEveryFirstLevelNodeUncheckable(flattenNodes, uncheckableItemValues, valueKey), _merge3));\n    var treeViewProps = {\n      ref: treeView\n    };\n    if (inline) {\n      treeViewProps = _extends({\n        ref: root,\n        style: _extends({\n          height: height\n        }, style)\n      }, rest);\n    }\n    return /*#__PURE__*/React.createElement(TreeView, _extends({}, treeViewProps, {\n      multiselectable: true,\n      treeRootClassName: treeNodesClass,\n      className: classes,\n      onScroll: onScroll,\n      onKeyDown: inline ? handleTreeKeydown : undefined\n    }), virtualized ? /*#__PURE__*/React.createElement(AutoSizer, {\n      defaultHeight: inline ? height : menuMaxHeight,\n      style: {\n        width: 'auto',\n        height: 'auto'\n      }\n    }, function (_ref5) {\n      var height = _ref5.height;\n      return /*#__PURE__*/React.createElement(List, _extends({\n        ref: list,\n        height: height,\n        itemSize: itemSize,\n        itemCount: formattedNodes.length,\n        itemData: formattedNodes\n      }, listProps), renderVirtualListNode);\n    }) : formattedNodes);\n  };\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var left = positionProps.left,\n      top = positionProps.top,\n      className = positionProps.className;\n    var classes = classNames(className, menuClassName, prefix('check-tree-menu'));\n    var mergedMenuStyle = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n    return /*#__PURE__*/React.createElement(PickerPopup, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: mergedMenuStyle,\n      ref: mergeRefs(overlay, speakerRef),\n      onKeyDown: onPickerKeydown,\n      target: trigger\n    }, searchable ? /*#__PURE__*/React.createElement(SearchBox, {\n      placeholder: locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeywordState,\n      inputRef: searchInput\n    }) : null, renderMenu ? renderMenu(renderCheckTree()) : renderCheckTree(), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n  var selectedItems = useMemo(function () {\n    return getSelectedItems(flattenNodes, value);\n  }, [flattenNodes, value]);\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n  var hasValidValue = selectedItems.length > 0 || value.length > 0 && _isFunction(renderValue);\n  var selectedElement = placeholder;\n  if (hasValidValue) {\n    selectedElement = /*#__PURE__*/React.createElement(SelectedElement, {\n      selectedItems: selectedItems,\n      countable: countable,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      prefix: prefix,\n      cascade: cascade,\n      locale: locale\n    });\n    if (_isFunction(renderValue)) {\n      selectedElement = renderValue(value, selectedItems, selectedElement);\n      if (_isNil(selectedElement)) {\n        hasValidValue = false;\n      }\n    }\n  }\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n      classPrefix: classPrefix,\n      appearance: appearance,\n      countable: countable,\n      cleanable: cleanable,\n      disabled: disabled,\n      hasValue: hasValidValue,\n      name: 'check-tree'\n    })),\n    classes = _usePickerClassName[0],\n    usedClassNamePropKeys = _usePickerClassName[1];\n  if (inline) {\n    return renderCheckTree();\n  }\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    id: id,\n    popupType: \"tree\",\n    multiple: true,\n    pickerProps: _pick(props, pickTriggerPropKeys),\n    ref: trigger,\n    placement: placement,\n    onEnter: handleOpen,\n    onEntered: onEntered,\n    onExited: createChainedFunction(handleClose, onExited),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style,\n    ref: root\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, _omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    ref: target,\n    appearance: appearance,\n    onKeyDown: onPickerKeydown,\n    onClean: createChainedFunction(handleClean, onClean),\n    cleanable: cleanable && !disabled,\n    disabled: disabled,\n    as: toggleAs,\n    hasValue: hasValidValue,\n    active: active,\n    placement: placement,\n    inputValue: value,\n    focusItemValue: focusItemValue\n  }), selectedElement || locale.placeholder)));\n});\nCheckTreePicker.displayName = 'CheckTreePicker';\nCheckTreePicker.propTypes = _extends({}, listPickerPropTypes, {\n  height: PropTypes.number,\n  appearance: oneOf(['default', 'subtle']),\n  locale: PropTypes.any,\n  cascade: PropTypes.bool,\n  countable: PropTypes.bool,\n  searchable: PropTypes.bool,\n  virtualized: PropTypes.bool,\n  searchKeyword: PropTypes.string,\n  menuAutoWidth: PropTypes.bool,\n  defaultExpandAll: PropTypes.bool,\n  containerPadding: PropTypes.number,\n  disabledItemValues: PropTypes.array,\n  expandItemValues: PropTypes.array,\n  defaultExpandItemValues: PropTypes.array,\n  uncheckableItemValues: PropTypes.array,\n  onSearch: PropTypes.func,\n  onExpand: PropTypes.func,\n  onSelect: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderTreeNode: PropTypes.func,\n  renderTreeIcon: PropTypes.func,\n  searchBy: PropTypes.func,\n  onScroll: PropTypes.func\n});\nexport default CheckTreePicker;","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","_isUndefined","_cloneDeep","_omit","_isFunction","_pick","_isNil","React","useState","useEffect","useContext","useMemo","PropTypes","classNames","List","AutoSizer","CheckTreeNode","TreeContext","getKeyParentMap","getPathTowardsItem","getTreeNodeIndent","createChainedFunction","useCustom","useClassNames","useControlled","useEventCallback","KEY_VALUES","mergeRefs","PickerToggle","TreeView","onMenuKeyDown","_onMenuKeyDown","PickerPopup","SelectedElement","PickerToggleTrigger","createConcatChildrenFunction","usePickerClassName","useToggleKeyDownEvent","usePickerRef","pickTriggerPropKeys","omitTriggerPropKeys","listPickerPropTypes","SearchBox","isEveryChildChecked","isSomeNodeHasChildren","isAllSiblingNodeUncheckable","isEveryFirstLevelNodeUncheckable","getFormattedTree","getDisabledState","getCheckTreePickerDefaultValue","getSelectedItems","isNodeUncheckable","hasVisibleChildren","getExpandWhenSearching","useTreeSearch","useTreeNodeRefs","getDefaultExpandItemValues","useFlattenTreeData","focusNextItem","getFocusableItems","focusPreviousItem","toggleExpand","getActiveItem","useGetTreeNodeChildren","focusToActiveTreeNode","focusTreeNode","leftArrowHandler","rightArrowHandler","isSearching","oneOf","emptyArray","itemSize","CheckTreePicker","forwardRef","props","ref","_props$as","as","Component","_props$data","data","style","_props$appearance","appearance","_props$cleanable","cleanable","_props$countable","countable","searchBy","toggleAs","searchKeyword","showIndentLine","overrideLocale","locale","_props$cascade","cascade","disabled","_props$valueKey","valueKey","_props$labelKey","labelKey","_props$placement","placement","_props$childrenKey","childrenKey","placeholder","controlledValue","value","_props$defaultValue","defaultValue","_props$defaultExpandA","defaultExpandAll","_props$disabledItemVa","disabledItemValues","controlledExpandItemValues","expandItemValues","_props$defaultExpandI","defaultExpandItemValues","_props$height","height","_props$menuMaxHeight","menuMaxHeight","menuStyle","_props$searchable","searchable","_props$virtualized","virtualized","className","_props$classPrefix","classPrefix","menuClassName","_props$menuAutoWidth","menuAutoWidth","_props$uncheckableIte","uncheckableItemValues","id","listProps","renderMenu","getChildren","renderExtraFooter","onEntered","onChange","onClean","onExited","onSearch","onSelect","onSelectItem","onScroll","onExpand","renderValue","renderTreeIcon","renderTreeNode","rest","_useContext","inline","_usePickerRef","trigger","root","target","overlay","list","searchInput","treeView","_useCustom","rtl","_useState","active","setActive","_useState2","activeNode","setActiveNode","_useClassNames","prefix","merge","_useClassNames2","checkTreePrefix","withCheckTreeClassPrefix","withClassPrefix","_useControlled","setValue","isControlled","_useGetTreeNodeChildr","treeData","setTreeData","setData","loadingNodeValues","loadChildren","_useControlled2","setExpandItemValues","_useState3","focusItemValue","setFocusItemValue","_useFlattenTreeData","callback","nodes","unSerializeList","key","forceUpdate","flattenNodes","formatVirtualizedTreeData","serializeListOnlyParent","_useTreeSearch","_filterData","event","filteredData","searchKeywordState","setSearchKeyword","handleSearch","setFilteredData","_useTreeNodeRefs","treeNodesRefs","saveTreeNodeRef","getFormattedNodes","render","filter","item","visible","map","node","getTreeNodeProps","layer","label","focus","expand","loading","some","nodeData","checkState","uncheckable","allUncheckable","handleSelect","handleExpand","focusActiveNode","current","selector","container","formattedNodes","Array","isArray","toggleUpChecked","checked","currentNode","refKey","check","checkAll","parent","toggleDownChecked","isChecked","length","forEach","child","toggleChecked","values","v","includes","itemParentMap","selectedValues","get","handleOpen","handleClose","_target$current","nextExpandItemValues","isExpand","handleClean","matches","handleFocusItem","focusableItems","focusProps","nextFocusItemValue","DOWN","UP","handleLeftArrow","focusItem","onFocusItem","_focusItem$parent","_focusItem$parent2","handleRightArrow","selectActiveItem","activeItem","onPickerKeydown","toggle","onExit","down","up","left","right","enter","del","handleTreeKeydown","renderNode","children","visibleChildren","nodeProps","hasChildren","_merge","openClass","childrenClass","createElement","_ref","role","_ref2","renderVirtualListNode","_ref3","index","_ref4","renderCheckTree","_merge2","_merge3","classes","noResultsText","treeNodesClass","treeViewProps","multiselectable","treeRootClassName","onKeyDown","undefined","defaultHeight","width","_ref5","itemCount","itemData","renderDropdownMenu","positionProps","speakerRef","top","mergedMenuStyle","autoWidth","searchPlaceholder","inputRef","selectedItems","hasValidValue","selectedElement","_usePickerClassName","hasValue","name","usedClassNamePropKeys","popupType","multiple","pickerProps","onEnter","speaker","concat","inputValue","displayName","propTypes","number","any","bool","string","containerPadding","array","func"],"sources":["/Users/michalpozdal/Desktop/studia/3rok/ZTPAI/SkyQuest/front-end/node_modules/rsuite/esm/CheckTreePicker/CheckTreePicker.js"],"sourcesContent":["'use client';\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport _cloneDeep from \"lodash/cloneDeep\";\nimport _omit from \"lodash/omit\";\nimport _isFunction from \"lodash/isFunction\";\nimport _pick from \"lodash/pick\";\nimport _isNil from \"lodash/isNil\";\nimport React, { useState, useEffect, useContext, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { List, AutoSizer } from '../internals/Windowing';\nimport CheckTreeNode from './CheckTreeNode';\nimport TreeContext from '../Tree/TreeContext';\nimport { getKeyParentMap, getPathTowardsItem, getTreeNodeIndent } from '../utils/treeUtils';\nimport { createChainedFunction, useCustom, useClassNames, useControlled, useEventCallback, KEY_VALUES, mergeRefs } from '../utils';\nimport { PickerToggle, TreeView, onMenuKeyDown as _onMenuKeyDown, PickerPopup, SelectedElement, PickerToggleTrigger, createConcatChildrenFunction, usePickerClassName, useToggleKeyDownEvent, usePickerRef, pickTriggerPropKeys, omitTriggerPropKeys, listPickerPropTypes } from '../internals/Picker';\nimport SearchBox from '../internals/SearchBox';\nimport { isEveryChildChecked, isSomeNodeHasChildren, isAllSiblingNodeUncheckable, isEveryFirstLevelNodeUncheckable, getFormattedTree, getDisabledState, getCheckTreePickerDefaultValue, getSelectedItems, isNodeUncheckable } from './utils';\nimport { hasVisibleChildren, getExpandWhenSearching, useTreeSearch, useTreeNodeRefs, getDefaultExpandItemValues, useFlattenTreeData, focusNextItem, getFocusableItems, focusPreviousItem, toggleExpand, getActiveItem, useGetTreeNodeChildren, focusToActiveTreeNode, focusTreeNode, leftArrowHandler, rightArrowHandler, isSearching } from '../utils/treeUtils';\nimport { oneOf } from '../internals/propTypes';\nvar emptyArray = [];\nvar itemSize = function itemSize() {\n  return 36;\n};\n\n/**\n * The `CheckTreePicker` component is used for selecting multiple options which are organized in a tree structure.\n *\n * @see https://rsuitejs.com/components/check-tree-picker\n */\nvar CheckTreePicker = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _props$as = props.as,\n    Component = _props$as === void 0 ? 'div' : _props$as,\n    _props$data = props.data,\n    data = _props$data === void 0 ? emptyArray : _props$data,\n    style = props.style,\n    _props$appearance = props.appearance,\n    appearance = _props$appearance === void 0 ? 'default' : _props$appearance,\n    _props$cleanable = props.cleanable,\n    cleanable = _props$cleanable === void 0 ? true : _props$cleanable,\n    _props$countable = props.countable,\n    countable = _props$countable === void 0 ? true : _props$countable,\n    searchBy = props.searchBy,\n    toggleAs = props.toggleAs,\n    searchKeyword = props.searchKeyword,\n    showIndentLine = props.showIndentLine,\n    overrideLocale = props.locale,\n    _props$cascade = props.cascade,\n    cascade = _props$cascade === void 0 ? true : _props$cascade,\n    disabled = props.disabled,\n    _props$valueKey = props.valueKey,\n    valueKey = _props$valueKey === void 0 ? 'value' : _props$valueKey,\n    _props$labelKey = props.labelKey,\n    labelKey = _props$labelKey === void 0 ? 'label' : _props$labelKey,\n    _props$placement = props.placement,\n    placement = _props$placement === void 0 ? 'bottomStart' : _props$placement,\n    _props$childrenKey = props.childrenKey,\n    childrenKey = _props$childrenKey === void 0 ? 'children' : _props$childrenKey,\n    placeholder = props.placeholder,\n    controlledValue = props.value,\n    _props$defaultValue = props.defaultValue,\n    defaultValue = _props$defaultValue === void 0 ? emptyArray : _props$defaultValue,\n    _props$defaultExpandA = props.defaultExpandAll,\n    defaultExpandAll = _props$defaultExpandA === void 0 ? false : _props$defaultExpandA,\n    _props$disabledItemVa = props.disabledItemValues,\n    disabledItemValues = _props$disabledItemVa === void 0 ? emptyArray : _props$disabledItemVa,\n    controlledExpandItemValues = props.expandItemValues,\n    _props$defaultExpandI = props.defaultExpandItemValues,\n    defaultExpandItemValues = _props$defaultExpandI === void 0 ? emptyArray : _props$defaultExpandI,\n    _props$height = props.height,\n    height = _props$height === void 0 ? 360 : _props$height,\n    _props$menuMaxHeight = props.menuMaxHeight,\n    menuMaxHeight = _props$menuMaxHeight === void 0 ? 320 : _props$menuMaxHeight,\n    menuStyle = props.menuStyle,\n    _props$searchable = props.searchable,\n    searchable = _props$searchable === void 0 ? true : _props$searchable,\n    _props$virtualized = props.virtualized,\n    virtualized = _props$virtualized === void 0 ? false : _props$virtualized,\n    className = props.className,\n    _props$classPrefix = props.classPrefix,\n    classPrefix = _props$classPrefix === void 0 ? 'picker' : _props$classPrefix,\n    menuClassName = props.menuClassName,\n    _props$menuAutoWidth = props.menuAutoWidth,\n    menuAutoWidth = _props$menuAutoWidth === void 0 ? true : _props$menuAutoWidth,\n    _props$uncheckableIte = props.uncheckableItemValues,\n    uncheckableItemValues = _props$uncheckableIte === void 0 ? emptyArray : _props$uncheckableIte,\n    id = props.id,\n    listProps = props.listProps,\n    renderMenu = props.renderMenu,\n    getChildren = props.getChildren,\n    renderExtraFooter = props.renderExtraFooter,\n    onEntered = props.onEntered,\n    onChange = props.onChange,\n    onClean = props.onClean,\n    onExited = props.onExited,\n    onSearch = props.onSearch,\n    onSelect = props.onSelect,\n    onSelectItem = props.onSelectItem,\n    onScroll = props.onScroll,\n    onExpand = props.onExpand,\n    renderValue = props.renderValue,\n    renderTreeIcon = props.renderTreeIcon,\n    renderTreeNode = props.renderTreeNode,\n    rest = _objectWithoutPropertiesLoose(props, [\"as\", \"data\", \"style\", \"appearance\", \"cleanable\", \"countable\", \"searchBy\", \"toggleAs\", \"searchKeyword\", \"showIndentLine\", \"locale\", \"cascade\", \"disabled\", \"valueKey\", \"labelKey\", \"placement\", \"childrenKey\", \"placeholder\", \"value\", \"defaultValue\", \"defaultExpandAll\", \"disabledItemValues\", \"expandItemValues\", \"defaultExpandItemValues\", \"height\", \"menuMaxHeight\", \"menuStyle\", \"searchable\", \"virtualized\", \"className\", \"classPrefix\", \"menuClassName\", \"menuAutoWidth\", \"uncheckableItemValues\", \"id\", \"listProps\", \"renderMenu\", \"getChildren\", \"renderExtraFooter\", \"onEntered\", \"onChange\", \"onClean\", \"onExited\", \"onSearch\", \"onSelect\", \"onSelectItem\", \"onScroll\", \"onExpand\", \"renderValue\", \"renderTreeIcon\", \"renderTreeNode\"]);\n  var _useContext = useContext(TreeContext),\n    inline = _useContext.inline;\n  var _usePickerRef = usePickerRef(ref, {\n      inline: inline\n    }),\n    trigger = _usePickerRef.trigger,\n    root = _usePickerRef.root,\n    target = _usePickerRef.target,\n    overlay = _usePickerRef.overlay,\n    list = _usePickerRef.list,\n    searchInput = _usePickerRef.searchInput,\n    treeView = _usePickerRef.treeView;\n  var _useCustom = useCustom('Picker', overrideLocale),\n    rtl = _useCustom.rtl,\n    locale = _useCustom.locale;\n  var _useState = useState(false),\n    active = _useState[0],\n    setActive = _useState[1];\n  var _useState2 = useState(null),\n    activeNode = _useState2[0],\n    setActiveNode = _useState2[1];\n  var _useClassNames = useClassNames(classPrefix),\n    prefix = _useClassNames.prefix,\n    merge = _useClassNames.merge;\n  var _useClassNames2 = useClassNames(inline && classPrefix !== 'picker' ? classPrefix : 'check-tree'),\n    checkTreePrefix = _useClassNames2.prefix,\n    withCheckTreeClassPrefix = _useClassNames2.withClassPrefix;\n  var _useControlled = useControlled(controlledValue, defaultValue),\n    value = _useControlled[0],\n    setValue = _useControlled[1],\n    isControlled = _useControlled[2];\n  var _useGetTreeNodeChildr = useGetTreeNodeChildren(data, valueKey, childrenKey),\n    treeData = _useGetTreeNodeChildr.data,\n    setTreeData = _useGetTreeNodeChildr.setData,\n    loadingNodeValues = _useGetTreeNodeChildr.loadingNodeValues,\n    loadChildren = _useGetTreeNodeChildr.loadChildren;\n  var _useControlled2 = useControlled(controlledExpandItemValues, getDefaultExpandItemValues(treeData, {\n      defaultExpandAll: defaultExpandAll,\n      valueKey: valueKey,\n      childrenKey: childrenKey,\n      defaultExpandItemValues: defaultExpandItemValues\n    })),\n    expandItemValues = _useControlled2[0],\n    setExpandItemValues = _useControlled2[1];\n  var _useState3 = useState(null),\n    focusItemValue = _useState3[0],\n    setFocusItemValue = _useState3[1];\n  var _useFlattenTreeData = useFlattenTreeData({\n      data: treeData,\n      labelKey: labelKey,\n      valueKey: valueKey,\n      childrenKey: childrenKey,\n      uncheckableItemValues: uncheckableItemValues,\n      callback: function callback(nodes) {\n        // after flattenData, always unSerialize check property value\n        unSerializeList({\n          nodes: nodes,\n          key: 'check',\n          value: value,\n          cascade: cascade,\n          uncheckableItemValues: uncheckableItemValues\n        });\n        forceUpdate();\n      }\n    }),\n    flattenNodes = _useFlattenTreeData.flattenNodes,\n    forceUpdate = _useFlattenTreeData.forceUpdate,\n    formatVirtualizedTreeData = _useFlattenTreeData.formatVirtualizedTreeData,\n    serializeListOnlyParent = _useFlattenTreeData.serializeListOnlyParent,\n    unSerializeList = _useFlattenTreeData.unSerializeList;\n  var _useTreeSearch = useTreeSearch({\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      searchKeyword: searchKeyword,\n      data: treeData,\n      searchBy: searchBy,\n      callback: function callback(searchKeyword, _filterData, event) {\n        onSearch === null || onSearch === void 0 ? void 0 : onSearch(searchKeyword, event);\n      }\n    }),\n    filteredData = _useTreeSearch.filteredData,\n    searchKeywordState = _useTreeSearch.searchKeywordState,\n    setSearchKeyword = _useTreeSearch.setSearchKeyword,\n    handleSearch = _useTreeSearch.handleSearch,\n    setFilteredData = _useTreeSearch.setFilteredData;\n  var _useTreeNodeRefs = useTreeNodeRefs(),\n    treeNodesRefs = _useTreeNodeRefs.treeNodesRefs,\n    saveTreeNodeRef = _useTreeNodeRefs.saveTreeNodeRef;\n  /**\n   * get formatted nodes for render tree\n   * @params render - renderNode function. only used when virtualized setting false\n   */\n  var getFormattedNodes = function getFormattedNodes(render) {\n    if (virtualized) {\n      return formatVirtualizedTreeData(flattenNodes, filteredData, expandItemValues, {\n        cascade: cascade,\n        searchKeyword: searchKeywordState\n      }).filter(function (item) {\n        return item.visible;\n      });\n    }\n    return getFormattedTree(flattenNodes, filteredData, {\n      childrenKey: childrenKey,\n      cascade: cascade\n    }).map(function (node) {\n      return render === null || render === void 0 ? void 0 : render(node, 1);\n    });\n  };\n  var getTreeNodeProps = function getTreeNodeProps(node, layer) {\n    return {\n      as: Component,\n      rtl: rtl,\n      value: node[valueKey],\n      label: node[labelKey],\n      layer: layer,\n      focus: focusItemValue === node[valueKey],\n      expand: node.expand,\n      visible: node.visible,\n      loading: loadingNodeValues.some(function (item) {\n        return item === node[valueKey];\n      }),\n      disabled: getDisabledState(flattenNodes, node, {\n        disabledItemValues: disabledItemValues,\n        valueKey: valueKey\n      }),\n      nodeData: node,\n      checkState: node.checkState,\n      uncheckable: isNodeUncheckable(node, {\n        uncheckableItemValues: uncheckableItemValues,\n        valueKey: valueKey\n      }),\n      allUncheckable: isAllSiblingNodeUncheckable(node, flattenNodes, uncheckableItemValues, valueKey),\n      onSelect: handleSelect,\n      onExpand: handleExpand,\n      renderTreeNode: renderTreeNode,\n      renderTreeIcon: renderTreeIcon\n    };\n  };\n  var focusActiveNode = function focusActiveNode() {\n    if (list.current) {\n      focusToActiveTreeNode({\n        list: list.current,\n        valueKey: valueKey,\n        selector: \".\" + checkTreePrefix('node-active'),\n        activeNode: activeNode,\n        virtualized: virtualized,\n        container: treeView.current,\n        formattedNodes: getFormattedNodes()\n      });\n    }\n  };\n  useEffect(function () {\n    setValue(getCheckTreePickerDefaultValue(value, uncheckableItemValues));\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  useEffect(function () {\n    setFilteredData(data, searchKeywordState);\n    setTreeData(data);\n  }, [data, searchKeywordState, setFilteredData, setTreeData]);\n  useEffect(function () {\n    setFilteredData(treeData, searchKeywordState);\n  }, [treeData, searchKeywordState, setFilteredData]);\n  useEffect(function () {\n    if (Array.isArray(controlledExpandItemValues)) {\n      setExpandItemValues(controlledExpandItemValues);\n    }\n  }, [controlledExpandItemValues, setExpandItemValues]);\n  useEffect(function () {\n    setSearchKeyword(searchKeyword !== null && searchKeyword !== void 0 ? searchKeyword : '');\n  }, [searchKeyword, setSearchKeyword]);\n  useEffect(function () {\n    unSerializeList({\n      nodes: flattenNodes,\n      key: 'check',\n      value: value,\n      cascade: cascade,\n      uncheckableItemValues: uncheckableItemValues\n    });\n    forceUpdate();\n  }, [cascade, value, uncheckableItemValues, unSerializeList, flattenNodes, forceUpdate]);\n  var toggleUpChecked = useEventCallback(function (nodes, node, checked) {\n    var currentNode = node.refKey ? nodes[node.refKey] : null;\n    if (cascade && currentNode) {\n      if (!checked) {\n        currentNode.check = checked;\n        currentNode.checkAll = checked;\n      } else {\n        if (isEveryChildChecked(nodes, currentNode)) {\n          currentNode.check = true;\n          currentNode.checkAll = true;\n        } else {\n          currentNode.check = false;\n          currentNode.checkAll = false;\n        }\n      }\n      if (currentNode.parent) {\n        toggleUpChecked(nodes, currentNode.parent, checked);\n      }\n    }\n  });\n  var toggleDownChecked = useEventCallback(function (nodes, node, isChecked) {\n    var currentNode = node.refKey ? nodes[node.refKey] : null;\n    if (!currentNode) {\n      return;\n    }\n    currentNode.check = isChecked;\n    if (!currentNode[childrenKey] || !currentNode[childrenKey].length || !cascade) {\n      currentNode.checkAll = false;\n    } else {\n      currentNode.checkAll = isChecked;\n      currentNode[childrenKey].forEach(function (child) {\n        toggleDownChecked(nodes, child, isChecked);\n      });\n    }\n  });\n  var toggleChecked = useEventCallback(function (node, isChecked) {\n    var nodes = _cloneDeep(flattenNodes);\n    toggleDownChecked(nodes, node, isChecked);\n    node.parent && toggleUpChecked(nodes, node.parent, isChecked);\n    var values = serializeListOnlyParent(nodes, 'check');\n    // filter uncheckableItemValues\n    return values.filter(function (v) {\n      return !uncheckableItemValues.includes(v);\n    });\n  });\n\n  // TODO-Doma\n  // Replace `getKeyParentMap` with `getParentMap`\n  var itemParentMap = useMemo(function () {\n    return getKeyParentMap(data, function (node) {\n      return node[valueKey];\n    }, function (node) {\n      return node[childrenKey];\n    });\n  }, [childrenKey, data, valueKey]);\n  var handleSelect = useEventCallback(function (node, event) {\n    var currentNode = node.refKey ? flattenNodes[node.refKey] : null;\n    if (!node || !currentNode) {\n      return;\n    }\n    var selectedValues = toggleChecked(node, !currentNode.check);\n    if (!isControlled) {\n      unSerializeList({\n        nodes: flattenNodes,\n        key: 'check',\n        value: selectedValues,\n        cascade: cascade,\n        uncheckableItemValues: uncheckableItemValues\n      });\n      setValue(selectedValues);\n    }\n    setActiveNode(node);\n    setFocusItemValue(node[valueKey]);\n    onChange === null || onChange === void 0 ? void 0 : onChange(selectedValues, event);\n    onSelect === null || onSelect === void 0 ? void 0 : onSelect(node, selectedValues, event);\n    onSelectItem === null || onSelectItem === void 0 ? void 0 : onSelectItem(node, getPathTowardsItem(node, function (item) {\n      return itemParentMap.get(item[valueKey]);\n    }));\n  });\n  var handleOpen = useEventCallback(function () {\n    setFocusItemValue(activeNode === null || activeNode === void 0 ? void 0 : activeNode[valueKey]);\n    focusActiveNode();\n    setActive(true);\n  });\n  var handleClose = useEventCallback(function () {\n    var _target$current;\n    setSearchKeyword('');\n    setFocusItemValue(null);\n    setActive(false);\n\n    /**\n     * when using keyboard toggle picker, should refocus on PickerToggle Component after close picker menu\n     */\n    (_target$current = target.current) === null || _target$current === void 0 ? void 0 : _target$current.focus();\n  });\n  var handleExpand = useEventCallback(function (node) {\n    var nextExpandItemValues = toggleExpand({\n      node: node,\n      isExpand: !node.expand,\n      expandItemValues: expandItemValues,\n      valueKey: valueKey\n    });\n    setExpandItemValues(nextExpandItemValues);\n    onExpand === null || onExpand === void 0 ? void 0 : onExpand(nextExpandItemValues, node, createConcatChildrenFunction(node, node[valueKey], {\n      valueKey: valueKey,\n      childrenKey: childrenKey\n    }));\n    if (_isFunction(getChildren) && !node.expand && Array.isArray(node[childrenKey]) && node[childrenKey].length === 0) {\n      loadChildren(node, getChildren);\n    }\n  });\n  var handleClean = useEventCallback(function (event) {\n    var target = event.target;\n    // exclude searchbox\n    if (target.matches('input[role=\"searchbox\"]') || disabled || !cleanable) {\n      return;\n    }\n    setActiveNode(null);\n    setFocusItemValue(null);\n    if (!isControlled) {\n      setValue([]);\n      unSerializeList({\n        nodes: flattenNodes,\n        key: 'check',\n        value: [],\n        cascade: cascade,\n        uncheckableItemValues: uncheckableItemValues\n      });\n    }\n    onChange === null || onChange === void 0 ? void 0 : onChange([], event);\n  });\n  var handleFocusItem = useEventCallback(function (key) {\n    var focusableItems = getFocusableItems(filteredData, {\n      disabledItemValues: disabledItemValues,\n      valueKey: valueKey,\n      childrenKey: childrenKey,\n      expandItemValues: expandItemValues\n    }, isSearching(searchKeywordState));\n    var selector = \".\" + checkTreePrefix('node-label');\n    var focusProps = {\n      focusItemValue: focusItemValue,\n      focusableItems: focusableItems,\n      treeNodesRefs: treeNodesRefs,\n      selector: selector,\n      valueKey: valueKey,\n      callback: function callback(nextFocusItemValue) {\n        setFocusItemValue(nextFocusItemValue);\n      }\n    };\n    if (key === KEY_VALUES.DOWN) {\n      focusNextItem(focusProps);\n      return;\n    }\n    if (key === KEY_VALUES.UP) {\n      focusPreviousItem(focusProps);\n    }\n  });\n  var handleLeftArrow = useEventCallback(function () {\n    if (_isNil(focusItemValue)) return;\n    var focusItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    leftArrowHandler({\n      focusItem: focusItem,\n      expand: expandItemValues.includes(focusItem === null || focusItem === void 0 ? void 0 : focusItem[valueKey]),\n      onExpand: handleExpand,\n      childrenKey: childrenKey,\n      onFocusItem: function onFocusItem() {\n        var _focusItem$parent, _focusItem$parent2;\n        setFocusItemValue(focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent = focusItem.parent) === null || _focusItem$parent === void 0 ? void 0 : _focusItem$parent[valueKey]);\n        focusTreeNode(focusItem === null || focusItem === void 0 ? void 0 : (_focusItem$parent2 = focusItem.parent) === null || _focusItem$parent2 === void 0 ? void 0 : _focusItem$parent2.refKey, treeNodesRefs, \".\" + checkTreePrefix('node-label'));\n      }\n    });\n  });\n  var handleRightArrow = useEventCallback(function () {\n    if (_isNil(focusItemValue)) return;\n    var focusItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    rightArrowHandler({\n      focusItem: focusItem,\n      expand: expandItemValues.includes(focusItem === null || focusItem === void 0 ? void 0 : focusItem[valueKey]),\n      childrenKey: childrenKey,\n      onExpand: handleExpand,\n      onFocusItem: function onFocusItem() {\n        handleFocusItem(KEY_VALUES.DOWN);\n      }\n    });\n  });\n  var selectActiveItem = function selectActiveItem(event) {\n    if (_isNil(focusItemValue)) return;\n    var activeItem = getActiveItem(focusItemValue, flattenNodes, valueKey);\n    if (!isNodeUncheckable(activeItem, {\n      uncheckableItemValues: uncheckableItemValues,\n      valueKey: valueKey\n    }) && activeItem !== null) {\n      handleSelect(activeItem, event);\n    }\n  };\n  var onPickerKeydown = useToggleKeyDownEvent(_extends({\n    toggle: !focusItemValue || !active,\n    trigger: trigger,\n    target: target,\n    overlay: overlay,\n    searchInput: searchInput,\n    active: active,\n    onExit: handleClean,\n    onMenuKeyDown: function onMenuKeyDown(event) {\n      _onMenuKeyDown(event, {\n        down: function down() {\n          return handleFocusItem(KEY_VALUES.DOWN);\n        },\n        up: function up() {\n          return handleFocusItem(KEY_VALUES.UP);\n        },\n        left: rtl ? handleRightArrow : handleLeftArrow,\n        right: rtl ? handleLeftArrow : handleRightArrow,\n        enter: selectActiveItem,\n        del: handleClean\n      });\n    }\n  }, rest));\n  var handleTreeKeydown = useEventCallback(function (event) {\n    if (!treeView.current) {\n      return;\n    }\n    _onMenuKeyDown(event, {\n      down: function down() {\n        return handleFocusItem(KEY_VALUES.DOWN);\n      },\n      up: function up() {\n        return handleFocusItem(KEY_VALUES.UP);\n      },\n      left: rtl ? handleRightArrow : handleLeftArrow,\n      right: rtl ? handleLeftArrow : handleRightArrow,\n      enter: selectActiveItem\n    });\n  });\n  var renderNode = function renderNode(node, layer) {\n    var visible = node.visible,\n      refKey = node.refKey; // when searching, all nodes should be expand\n    var expand = getExpandWhenSearching(searchKeywordState, expandItemValues.includes(node[valueKey]));\n    if (!visible) {\n      return null;\n    }\n    var children = node[childrenKey];\n    var visibleChildren = _isUndefined(searchKeywordState) || searchKeywordState.length === 0 ? !!children : hasVisibleChildren(node, childrenKey);\n    var nodeProps = _extends({}, getTreeNodeProps(_extends({}, node, {\n      /**\n       * spread operator don't copy unenumerable properties\n       * so we need to copy them manually\n       */\n      parent: node.parent,\n      expand: expand\n    }), layer), {\n      hasChildren: visibleChildren\n    });\n    if (nodeProps.hasChildren) {\n      var _merge;\n      layer += 1;\n      var openClass = checkTreePrefix('open');\n      var childrenClass = merge(checkTreePrefix('node-children'), (_merge = {}, _merge[openClass] = expand && visibleChildren, _merge));\n      var nodes = children || [];\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: childrenClass,\n        key: node[valueKey]\n      }, /*#__PURE__*/React.createElement(CheckTreeNode, _extends({}, nodeProps, {\n        ref: function ref(_ref) {\n          return saveTreeNodeRef(_ref, refKey);\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: checkTreePrefix('group'),\n        role: \"group\"\n      }, nodes.map(function (child) {\n        return renderNode(child, layer);\n      }), showIndentLine && /*#__PURE__*/React.createElement(\"span\", {\n        className: checkTreePrefix('indent-line'),\n        style: getTreeNodeIndent(rtl, layer - 1, true)\n      })));\n    }\n    return /*#__PURE__*/React.createElement(CheckTreeNode, _extends({\n      key: node[valueKey],\n      ref: function ref(_ref2) {\n        return saveTreeNodeRef(_ref2, refKey);\n      }\n    }, nodeProps));\n  };\n  var renderVirtualListNode = function renderVirtualListNode(_ref3) {\n    var index = _ref3.index,\n      style = _ref3.style,\n      data = _ref3.data;\n    var node = data[index];\n    var layer = node.layer,\n      refKey = node.refKey,\n      visible = node.visible;\n    var expand = getExpandWhenSearching(searchKeywordState, expandItemValues.includes(node[valueKey]));\n    var nodeProps = _extends({}, getTreeNodeProps(_extends({}, node, {\n      /**\n       * spread operator don't copy unenumerable properties\n       * so we need to copy them manually\n       */\n      parent: node.parent,\n      expand: expand\n    }), layer), {\n      hasChildren: node.hasChildren\n    });\n    return visible && /*#__PURE__*/React.createElement(CheckTreeNode, _extends({\n      style: style,\n      ref: function ref(_ref4) {\n        return saveTreeNodeRef(_ref4, refKey);\n      }\n    }, nodeProps));\n  };\n  var renderCheckTree = function renderCheckTree() {\n    var _merge2, _merge3;\n    var classes = merge(withCheckTreeClassPrefix({\n      'without-children': !isSomeNodeHasChildren(data, childrenKey),\n      virtualized: virtualized\n    }), (_merge2 = {}, _merge2[className !== null && className !== void 0 ? className : ''] = inline, _merge2));\n    var formattedNodes = getFormattedNodes(renderNode);\n    if (!formattedNodes.some(function (v) {\n      return v !== null;\n    })) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: prefix('none')\n      }, locale.noResultsText);\n    }\n    var treeNodesClass = merge(checkTreePrefix('root'), (_merge3 = {}, _merge3[checkTreePrefix('all-uncheckable')] = isEveryFirstLevelNodeUncheckable(flattenNodes, uncheckableItemValues, valueKey), _merge3));\n    var treeViewProps = {\n      ref: treeView\n    };\n    if (inline) {\n      treeViewProps = _extends({\n        ref: root,\n        style: _extends({\n          height: height\n        }, style)\n      }, rest);\n    }\n    return /*#__PURE__*/React.createElement(TreeView, _extends({}, treeViewProps, {\n      multiselectable: true,\n      treeRootClassName: treeNodesClass,\n      className: classes,\n      onScroll: onScroll,\n      onKeyDown: inline ? handleTreeKeydown : undefined\n    }), virtualized ? /*#__PURE__*/React.createElement(AutoSizer, {\n      defaultHeight: inline ? height : menuMaxHeight,\n      style: {\n        width: 'auto',\n        height: 'auto'\n      }\n    }, function (_ref5) {\n      var height = _ref5.height;\n      return /*#__PURE__*/React.createElement(List, _extends({\n        ref: list,\n        height: height,\n        itemSize: itemSize,\n        itemCount: formattedNodes.length,\n        itemData: formattedNodes\n      }, listProps), renderVirtualListNode);\n    }) : formattedNodes);\n  };\n  var renderDropdownMenu = function renderDropdownMenu(positionProps, speakerRef) {\n    var left = positionProps.left,\n      top = positionProps.top,\n      className = positionProps.className;\n    var classes = classNames(className, menuClassName, prefix('check-tree-menu'));\n    var mergedMenuStyle = _extends({}, menuStyle, {\n      left: left,\n      top: top\n    });\n    return /*#__PURE__*/React.createElement(PickerPopup, {\n      autoWidth: menuAutoWidth,\n      className: classes,\n      style: mergedMenuStyle,\n      ref: mergeRefs(overlay, speakerRef),\n      onKeyDown: onPickerKeydown,\n      target: trigger\n    }, searchable ? /*#__PURE__*/React.createElement(SearchBox, {\n      placeholder: locale.searchPlaceholder,\n      onChange: handleSearch,\n      value: searchKeywordState,\n      inputRef: searchInput\n    }) : null, renderMenu ? renderMenu(renderCheckTree()) : renderCheckTree(), renderExtraFooter === null || renderExtraFooter === void 0 ? void 0 : renderExtraFooter());\n  };\n  var selectedItems = useMemo(function () {\n    return getSelectedItems(flattenNodes, value);\n  }, [flattenNodes, value]);\n  /**\n   * 1.Have a value and the value is valid.\n   * 2.Regardless of whether the value is valid, as long as renderValue is set, it is judged to have a value.\n   */\n  var hasValidValue = selectedItems.length > 0 || value.length > 0 && _isFunction(renderValue);\n  var selectedElement = placeholder;\n  if (hasValidValue) {\n    selectedElement = /*#__PURE__*/React.createElement(SelectedElement, {\n      selectedItems: selectedItems,\n      countable: countable,\n      valueKey: valueKey,\n      labelKey: labelKey,\n      childrenKey: childrenKey,\n      prefix: prefix,\n      cascade: cascade,\n      locale: locale\n    });\n    if (_isFunction(renderValue)) {\n      selectedElement = renderValue(value, selectedItems, selectedElement);\n      if (_isNil(selectedElement)) {\n        hasValidValue = false;\n      }\n    }\n  }\n  var _usePickerClassName = usePickerClassName(_extends({}, props, {\n      classPrefix: classPrefix,\n      appearance: appearance,\n      countable: countable,\n      cleanable: cleanable,\n      disabled: disabled,\n      hasValue: hasValidValue,\n      name: 'check-tree'\n    })),\n    classes = _usePickerClassName[0],\n    usedClassNamePropKeys = _usePickerClassName[1];\n  if (inline) {\n    return renderCheckTree();\n  }\n  return /*#__PURE__*/React.createElement(PickerToggleTrigger, {\n    id: id,\n    popupType: \"tree\",\n    multiple: true,\n    pickerProps: _pick(props, pickTriggerPropKeys),\n    ref: trigger,\n    placement: placement,\n    onEnter: handleOpen,\n    onEntered: onEntered,\n    onExited: createChainedFunction(handleClose, onExited),\n    speaker: renderDropdownMenu\n  }, /*#__PURE__*/React.createElement(Component, {\n    className: classes,\n    style: style,\n    ref: root\n  }, /*#__PURE__*/React.createElement(PickerToggle, _extends({}, _omit(rest, [].concat(omitTriggerPropKeys, usedClassNamePropKeys)), {\n    ref: target,\n    appearance: appearance,\n    onKeyDown: onPickerKeydown,\n    onClean: createChainedFunction(handleClean, onClean),\n    cleanable: cleanable && !disabled,\n    disabled: disabled,\n    as: toggleAs,\n    hasValue: hasValidValue,\n    active: active,\n    placement: placement,\n    inputValue: value,\n    focusItemValue: focusItemValue\n  }), selectedElement || locale.placeholder)));\n});\nCheckTreePicker.displayName = 'CheckTreePicker';\nCheckTreePicker.propTypes = _extends({}, listPickerPropTypes, {\n  height: PropTypes.number,\n  appearance: oneOf(['default', 'subtle']),\n  locale: PropTypes.any,\n  cascade: PropTypes.bool,\n  countable: PropTypes.bool,\n  searchable: PropTypes.bool,\n  virtualized: PropTypes.bool,\n  searchKeyword: PropTypes.string,\n  menuAutoWidth: PropTypes.bool,\n  defaultExpandAll: PropTypes.bool,\n  containerPadding: PropTypes.number,\n  disabledItemValues: PropTypes.array,\n  expandItemValues: PropTypes.array,\n  defaultExpandItemValues: PropTypes.array,\n  uncheckableItemValues: PropTypes.array,\n  onSearch: PropTypes.func,\n  onExpand: PropTypes.func,\n  onSelect: PropTypes.func,\n  renderMenu: PropTypes.func,\n  renderTreeNode: PropTypes.func,\n  renderTreeIcon: PropTypes.func,\n  searchBy: PropTypes.func,\n  onScroll: PropTypes.func\n});\nexport default CheckTreePicker;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}